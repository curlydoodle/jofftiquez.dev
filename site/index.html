<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="./css/output.css" rel="stylesheet">
  <title>Document</title>
</head>

<body onclick="bodyClick()">
  <main class="h-screen">
    <div class="flex flex-col mb-5">
      <span class="block">Hi, I'm Joff. Welcome!</span>
      <span class="block">Type '--help' to see available commands.</span>
      <span class="block">If you are not familiar with the command line interface, you can switch to <a
          href="./pretty.html" class="text-[#8ae335]">pretty mode.</a></span>
    </div>
    <section id="history"></section>
    <section id="prompt">
      <div class="flex">
        <span class="shrink text-[#8ae335]">guest@jofftiquez.dev <span id="date-tiem">Mar. 18, 2023 00:00:00</span>
          <span class="text-[#729ece]">~/ $</span></span>
        <form id="promptForm">
          <input class="prompt-input" type="text" name="Prompt Input" id="promptInput">
          <button type="submit" class="hidden"></button>
        </form>
      </div>
    </section>
  </main>

  <script>
    const options = {
      github: {
        id: 'github',
        link: 'https://github.com/jofftiquez',
      },
      stackoverflow: {
        id: 'stackoverflow',
        link: 'https://stackoverflow.com/users/2889614/cent1pede',
      },
      blog: {
        id: 'blog',
        link: 'https://randomcodetips.com',
      },
      linkedin: {
        id: 'linkedin',
        link: 'https://linkedin.com/in/jofftiquez',
      },
      twitter: {
        id: 'twitter',
        link: 'https://twitter.com/jrtiquez',
      },
      facebook: {
        id: 'facebook',
        link: 'https://facebook.com/jofftiquez',
      },
      cv: {
        id: 'cv',
        link: 'https://stackoverflow.com/cv/jofftiquez',
      },
    };

    const help = `
    <section id="help-output" class="flex flex-col">
      <p>Syntax: &ltcommand&gt &ltoptions&gt</p>
      <p class="mb-5">Commands: <b>go</b>, <b>contact</b>, <b>clear</b></p>

      <p>The <b>go</b> command - Visit a specific link about me.</p>
      <p class="indent-5">Usage: <b>go</b> &gtoption&gt</p>
      <p class="indent-5 mb-5">Options: github, stackoverflow, blog, linkedin, twitter, facebook, cv</p>

      <p>The <b>contact</b> command - Contact me.</p>
      <p class="indent-5 mb-5">Usage: <b>contact</b></p>

      <p>The <b>clear</b> command - Clear the terminal.</p>
      <p class="indent-5">Usage: <b>clear</b></p>
    </section>
  `;

    const components = {
      help,
    }

  </script>

  <script>
    const promptInput = document.querySelector('#promptInput');
    const promptForm = document.querySelector('#promptForm');
    const historyContainer = document.querySelector('#history');
    promptForm.addEventListener('submit', submit);
    const history = [];

    function init() {
      promptInput.focus();
    }

    function submit(e) {
      e.preventDefault();
      const value = promptInput.value;
      if (!value) return;
      promptForm.reset();

      // TODO: validate input
      // TODO: determine command: error, help, go, contact, clear
      // TODO: push type to history[]
      // TODO: map html output based on history
      // TODO: populate in template
      history.push({ id: 'help' });

      const mappedHistory = history.map(item => {
        const component = components[item.id];
        console.warn('component', component);
        return component;
      }).join('');

      console.warn('mappedHistory', mappedHistory);

      historyContainer.innerHTML = mappedHistory;
    }

    function bodyClick() {
      promptInput.focus();
    }

    init();
  </script>
</body>

</html>